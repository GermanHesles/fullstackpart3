{"version":3,"sources":["services/persons/getAllPersons.js","services/persons/createPerson.js","services/persons/erasePerson.js","services/persons/updatePerson.js","helpers/messenger.js","PersonForm.js","Persons.js","helpers/validatePerson.js","App.js","reportWebVitals.js","index.js"],"names":["getAllPersons","axios","get","then","response","data","createPerson","name","number","userId","post","erasePerson","person","setWorking","setPersons","delete","id","persons","updatePerson","put","setMessage","message","type","setErrorMessage","setConfirmMessage","setTimeout","PersonForm","handleSubmit","handleChange","newName","handleChangeNumber","newNumber","onSubmit","onChange","value","Persons","handleErasePerson","map","onClick","validatePerson","messenger","Filter","handleSearch","showPerson","App","useState","setNewName","setNewNumber","setShowPerson","working","errorMessage","confirmMessage","useEffect","personsAfterFilter","filter","toLowerCase","includes","className","event","target","preventDefault","foundPerson","undefined","some","trim","window","confirm","updatedPerson","newPerson","prevPersons","concat","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b2aeef4.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst getAllPersons = () => {\n  return axios.get('https://tranquil-journey-59310.herokuapp.com/api/persons')\n    .then(response => {\n      const {data} = response;\n      return data\n    });\n}\n\nexport default getAllPersons;","import axios from \"axios\";\n\nconst createPerson = ({name, number, userId}) => {\n  return axios.post('https://tranquil-journey-59310.herokuapp.com/api/persons', {name, number, userId})\n    .then(response => {\n      const {data} = response;\n      return data\n    })\n}\n\nexport default createPerson;","import axios from \"axios\";\nimport getAllPersons from './getAllPersons'\n\nconst erasePerson = (person, setWorking, setPersons) => {\n    setWorking(true);\n    return axios.delete(`https://tranquil-journey-59310.herokuapp.com/api/persons/${person.id}/`)\n    .then(response => {\n      setWorking(false);\n      const {data} = response;\n      getAllPersons().then((persons) => {\n        setPersons(persons);\n      });\n\n      return data\n    })\n  }\n\n  export default erasePerson;","import axios from \"axios\";\nimport getAllPersons from './getAllPersons'\n\nconst updatePerson = (person, setPersons) => {\n    const {name, number, id} = person;\n\n    return axios.put(`https://tranquil-journey-59310.herokuapp.com/api/persons/${id}/`, {name, number})\n    .then(response => {\n      const {data} = response;\n      getAllPersons().then((persons) => {\n        setPersons(persons);\n      });\n      return data\n    })\n  }\n\nexport default updatePerson;","const setMessage = (message, type, setErrorMessage, setConfirmMessage) => {\n    if (type === 'error') {\n      setErrorMessage(message)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n\n    if (type === 'confirm') {\n      setConfirmMessage(message)\n      setTimeout(() => {\n        setConfirmMessage(null)\n      }, 5000)\n    }\n  }\n\nexport default setMessage;","const PersonForm = ({\n    handleSubmit,\n    handleChange,\n    newName,\n    handleChangeNumber,\n    newNumber\n  }) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        name:\n        <input type='text' onChange={handleChange} value={newName} />\n      </div>\n      <div>\n        number:\n        <input type='tel' onChange={handleChangeNumber} value={newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;","const Persons = ({persons, handleErasePerson}) => {\n  return persons.map((person) => {\n    return <p key={person.id}>\n      {person.name} {person.number}\n      <button onClick={() => {handleErasePerson(person)}}>delete</button>\n    </p>\n  })\n}\n\nexport default Persons;","import messenger from './messenger';\n\nconst validatePerson = (newName, newNumber, setConfirmMessage, setErrorMessage) => {\n  if (!newName) {\n    messenger('Name is empty', 'error', setErrorMessage, setConfirmMessage)\n    return false;\n  }\n\n  if (!newNumber) {\n    messenger('Number is empty', 'error', setErrorMessage, setConfirmMessage)\n    return false;\n  }\n\n  return true;\n}\n\nexport default validatePerson;","import React, { useState, useEffect } from 'react';\nimport getAllPersons from './services/persons/getAllPersons';\nimport createPerson from './services/persons/createPerson';\nimport erasePerson  from './services/persons/erasePerson';\nimport updatePerson from './services/persons/updatePerson';\nimport messenger from './helpers/messenger';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport validatePerson from './helpers/validatePerson';\nimport './App.css';\n\nconst Filter = ({handleSearch, showPerson}) => {\n  return (\n    <input type='text' onChange={handleSearch} value={showPerson} />\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState();\n  const [newNumber, setNewNumber] = useState();\n  const [showPerson, setShowPerson] = useState('');\n  const [working, setWorking] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(false);\n  const [confirmMessage, setConfirmMessage] = useState(false);\n\n  const handleErasePerson = (person) => {\n    erasePerson(person, setWorking, setPersons)\n    messenger(`${person.name} has been removed from server`, 'confirm', setErrorMessage, setConfirmMessage)\n  }\n\n  useEffect(() => {\n    getAllPersons().then((persons) => {\n        setPersons(persons);\n      });\n  }, []);\n\n  const handleSearch = (event) => {\n    setShowPerson(event.target.value);\n  };\n\n  const handleChangeNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    let foundPerson = undefined;\n\n    if (!validatePerson(newName, newNumber, setConfirmMessage, setErrorMessage)) {\n      return;\n    }\n\n    if (persons.some((person) => {\n      foundPerson = person\n\n      return person.name.toLowerCase().trim() === newName.toLowerCase().trim()\n    })) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const updatedPerson = {\n          name: newName.trim(),\n          number: newNumber.trim(),\n          id: foundPerson.id\n        }\n\n        updatePerson(updatedPerson, setPersons);\n        messenger(`Information of ${newName} has been updated`, 'confirm', setErrorMessage, setConfirmMessage)\n      }\n\n      return;\n    }\n\n    const personsToAddToState = {\n      name: newName,\n      number: newNumber,\n      userId: 1\n    };\n\n    createPerson(personsToAddToState)\n      .then(newPerson => {\n        setPersons(prevPersons => prevPersons.concat(newPerson))\n        messenger(`Added ${newName}`, 'confirm', setErrorMessage, setConfirmMessage)\n        return;\n      })\n      .catch(() => {\n        messenger('An Error Happened', 'error', setErrorMessage, setConfirmMessage)\n        return;\n      })\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const filterx = (person) => {\n    return person.name.toLowerCase().includes(showPerson.toLowerCase())\n  }\n\n  const personsAfterFilter = persons.filter(filterx)\n\n  return (\n    <div>\n      {working && <div>Loading</div>}\n      <h2>Phonebook</h2>\n      {confirmMessage && <div className=\"message message-confirm\">{confirmMessage}</div>}\n      {errorMessage && <div className=\"message message-error\">\n        {errorMessage}</div>}\n      <Filter showPerson={showPerson} handleSearch={handleSearch}/>\n      <h3>add a new</h3>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleChange={handleChange}\n        newName={newName}\n        handleChangeNumber={handleChangeNumber}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <div>\n        <Persons handleErasePerson={handleErasePerson} persons={personsAfterFilter} />\n      </div>\n    </div>\n  )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}