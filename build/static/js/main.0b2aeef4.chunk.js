(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(16),o=t.n(c),u=(t(21),t(4)),i=t(3),s=t.n(i),d=function(){return s.a.get("https://tranquil-journey-59310.herokuapp.com/api/persons").then((function(e){return e.data}))},h=function(e){var n=e.name,t=e.number,r=e.userId;return s.a.post("https://tranquil-journey-59310.herokuapp.com/api/persons",{name:n,number:t,userId:r}).then((function(e){return e.data}))},b=function(e,n,t){return n(!0),s.a.delete("https://tranquil-journey-59310.herokuapp.com/api/persons/".concat(e.id,"/")).then((function(e){n(!1);var r=e.data;return d().then((function(e){t(e)})),r}))},j=function(e,n){var t=e.name,r=e.number,a=e.id;return s.a.put("https://tranquil-journey-59310.herokuapp.com/api/persons/".concat(a,"/"),{name:t,number:r}).then((function(e){var t=e.data;return d().then((function(e){n(e)})),t}))},m=function(e,n,t,r){"error"===n&&(t(e),setTimeout((function(){t(null)}),5e3)),"confirm"===n&&(r(e),setTimeout((function(){r(null)}),5e3))},l=t(0),f=function(e){var n=e.handleSubmit,t=e.handleChange,r=e.newName,a=e.handleChangeNumber,c=e.newNumber;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name:",Object(l.jsx)("input",{type:"text",onChange:t,value:r})]}),Object(l.jsxs)("div",{children:["number:",Object(l.jsx)("input",{type:"tel",onChange:a,value:c})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.handleErasePerson;return n.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number,Object(l.jsx)("button",{onClick:function(){t(e)},children:"delete"})]},e.id)}))},O=function(e,n,t,r){return e?!!n||(m("Number is empty","error",r,t),!1):(m("Name is empty","error",r,t),!1)},v=(t(41),function(e){var n=e.handleSearch,t=e.showPerson;return Object(l.jsx)("input",{type:"text",onChange:n,value:t})}),x=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(),o=Object(u.a)(c,2),i=o[0],s=o[1],x=Object(r.useState)(),g=Object(u.a)(x,2),w=g[0],C=g[1],S=Object(r.useState)(""),y=Object(u.a)(S,2),k=y[0],N=y[1],L=Object(r.useState)(!1),P=Object(u.a)(L,2),I=P[0],E=P[1],q=Object(r.useState)(!1),F=Object(u.a)(q,2),T=F[0],A=F[1],B=Object(r.useState)(!1),D=Object(u.a)(B,2),J=D[0],H=D[1];Object(r.useEffect)((function(){d().then((function(e){a(e)}))}),[]);var M=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return Object(l.jsxs)("div",{children:[I&&Object(l.jsx)("div",{children:"Loading"}),Object(l.jsx)("h2",{children:"Phonebook"}),J&&Object(l.jsx)("div",{className:"message message-confirm",children:J}),T&&Object(l.jsx)("div",{className:"message message-error",children:T}),Object(l.jsx)(v,{showPerson:k,handleSearch:function(e){N(e.target.value)}}),Object(l.jsx)("h3",{children:"add a new"}),Object(l.jsx)(f,{handleSubmit:function(e){e.preventDefault();var n=void 0;if(O(i,w,H,A))if(t.some((function(e){return n=e,e.name.toLowerCase().trim()===i.toLowerCase().trim()}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var r={name:i.trim(),number:w.trim(),id:n.id};j(r,a),m("Information of ".concat(i," has been updated"),"confirm",A,H)}}else h({name:i,number:w,userId:1}).then((function(e){a((function(n){return n.concat(e)})),m("Added ".concat(i),"confirm",A,H)})).catch((function(){m("An Error Happened","error",A,H)})),s(""),C("")},handleChange:function(e){s(e.target.value)},newName:i,handleChangeNumber:function(e){C(e.target.value)},newNumber:w}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)("div",{children:Object(l.jsx)(p,{handleErasePerson:function(e){b(e,E,a),m("".concat(e.name," has been removed from server"),"confirm",A,H)},persons:M})})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root")),g()}},[[42,1,2]]]);
//# sourceMappingURL=main.0b2aeef4.chunk.js.map